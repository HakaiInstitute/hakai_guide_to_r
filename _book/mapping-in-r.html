<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Hakai Institute R Stats Guide</title>
  <meta name="description" content="This is the Hakai Institutes R Guide">
  <meta name="generator" content="bookdown  and GitBook 2.6.7">

  <meta property="og:title" content="Hakai Institute R Stats Guide" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="images/analyst_red.png" />
  <meta property="og:description" content="This is the Hakai Institutes R Guide" />
  <meta name="github-repo" content="HakaiInstitute/hakai_guide_to_r" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Hakai Institute R Stats Guide" />
  
  <meta name="twitter:description" content="This is the Hakai Institutes R Guide" />
  <meta name="twitter:image" content="images/analyst_red.png" />

<meta name="author" content="Brett Johnson">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="version-control-and-collaboration.html">
<link rel="next" href="resources-and-references.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Hakai Institute R Stats Guide</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#filling-in-the-gaps"><i class="fa fa-check"></i><b>1.1</b> Filling in the Gaps</a></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#modern-approach-to-data-analysis"><i class="fa fa-check"></i><b>1.2</b> Modern Approach to Data Analysis</a></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#acknowledgements"><i class="fa fa-check"></i><b>1.3</b> Acknowledgements</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="data-analysts-toolbox.html"><a href="data-analysts-toolbox.html"><i class="fa fa-check"></i><b>2</b> Data Analyst’s Toolbox</a><ul>
<li class="chapter" data-level="2.1" data-path="data-analysts-toolbox.html"><a href="data-analysts-toolbox.html#r-and-r-studio"><i class="fa fa-check"></i><b>2.1</b> R and R Studio</a><ul>
<li class="chapter" data-level="2.1.1" data-path="data-analysts-toolbox.html"><a href="data-analysts-toolbox.html#step-by-step-rrstudio"><i class="fa fa-check"></i><b>2.1.1</b> Step-by-step R/RStudio</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="intro-to-r.html"><a href="intro-to-r.html"><i class="fa fa-check"></i><b>3</b> Intro to R</a><ul>
<li class="chapter" data-level="3.1" data-path="intro-to-r.html"><a href="intro-to-r.html#primary-resource"><i class="fa fa-check"></i><b>3.1</b> Primary Resource</a></li>
<li class="chapter" data-level="3.2" data-path="intro-to-r.html"><a href="intro-to-r.html#data-transformation"><i class="fa fa-check"></i><b>3.2</b> Data Transformation</a></li>
<li class="chapter" data-level="3.3" data-path="intro-to-r.html"><a href="intro-to-r.html#tidying-your-data"><i class="fa fa-check"></i><b>3.3</b> Tidying Your Data</a></li>
<li class="chapter" data-level="3.4" data-path="intro-to-r.html"><a href="intro-to-r.html#visualizing-data"><i class="fa fa-check"></i><b>3.4</b> Visualizing Data</a></li>
<li class="chapter" data-level="3.5" data-path="intro-to-r.html"><a href="intro-to-r.html#learning-objectives"><i class="fa fa-check"></i><b>3.5</b> Learning Objectives</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="general-principles.html"><a href="general-principles.html"><i class="fa fa-check"></i><b>4</b> General Principles</a><ul>
<li class="chapter" data-level="4.1" data-path="general-principles.html"><a href="general-principles.html#reproducible-research"><i class="fa fa-check"></i><b>4.1</b> Reproducible Research</a></li>
<li class="chapter" data-level="4.2" data-path="general-principles.html"><a href="general-principles.html#open-science-collaboration"><i class="fa fa-check"></i><b>4.2</b> Open Science Collaboration</a><ul>
<li class="chapter" data-level="4.2.1" data-path="general-principles.html"><a href="general-principles.html#peer-review"><i class="fa fa-check"></i><b>4.2.1</b> Peer Review</a></li>
<li class="chapter" data-level="4.2.2" data-path="general-principles.html"><a href="general-principles.html#code-review"><i class="fa fa-check"></i><b>4.2.2</b> Code Review</a></li>
<li class="chapter" data-level="4.2.3" data-path="general-principles.html"><a href="general-principles.html#collaboration"><i class="fa fa-check"></i><b>4.2.3</b> Collaboration</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="r-workflow-tips.html"><a href="r-workflow-tips.html"><i class="fa fa-check"></i><b>5</b> R Workflow Tips</a><ul>
<li class="chapter" data-level="5.1" data-path="r-workflow-tips.html"><a href="r-workflow-tips.html#create-a-new-r-studio-project"><i class="fa fa-check"></i><b>5.1</b> Create a new R-Studio Project</a></li>
<li class="chapter" data-level="5.2" data-path="r-workflow-tips.html"><a href="r-workflow-tips.html#file-paths-and-the-working-directory"><i class="fa fa-check"></i><b>5.2</b> File paths and the working directory</a><ul>
<li class="chapter" data-level="5.2.1" data-path="r-workflow-tips.html"><a href="r-workflow-tips.html#create-folder-structure"><i class="fa fa-check"></i><b>5.2.1</b> Create folder structure</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="r-workflow-tips.html"><a href="r-workflow-tips.html#analysis-workflow"><i class="fa fa-check"></i><b>5.3</b> Analysis Workflow</a><ul>
<li class="chapter" data-level="5.3.1" data-path="r-workflow-tips.html"><a href="r-workflow-tips.html#import-pre-process-tidy-data"><i class="fa fa-check"></i><b>5.3.1</b> Import, pre-process &amp; tidy data</a></li>
<li class="chapter" data-level="5.3.2" data-path="r-workflow-tips.html"><a href="r-workflow-tips.html#exploratory-data-analysis"><i class="fa fa-check"></i><b>5.3.2</b> Exploratory data analysis</a></li>
<li class="chapter" data-level="5.3.3" data-path="r-workflow-tips.html"><a href="r-workflow-tips.html#predict-and-model"><i class="fa fa-check"></i><b>5.3.3</b> Predict and Model</a></li>
<li class="chapter" data-level="5.3.4" data-path="r-workflow-tips.html"><a href="r-workflow-tips.html#communicate"><i class="fa fa-check"></i><b>5.3.4</b> Communicate</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="version-control-and-collaboration.html"><a href="version-control-and-collaboration.html"><i class="fa fa-check"></i><b>6</b> Version Control and Collaboration</a><ul>
<li class="chapter" data-level="6.1" data-path="version-control-and-collaboration.html"><a href="version-control-and-collaboration.html#google-drive"><i class="fa fa-check"></i><b>6.1</b> Google Drive</a><ul>
<li class="chapter" data-level="6.1.1" data-path="version-control-and-collaboration.html"><a href="version-control-and-collaboration.html#version-control"><i class="fa fa-check"></i><b>6.1.1</b> Version Control</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="version-control-and-collaboration.html"><a href="version-control-and-collaboration.html#git-and-github"><i class="fa fa-check"></i><b>6.2</b> Git and GitHUB</a><ul>
<li class="chapter" data-level="6.2.1" data-path="version-control-and-collaboration.html"><a href="version-control-and-collaboration.html#step-by-step-gitgithub"><i class="fa fa-check"></i><b>6.2.1</b> Step-by-step Git/GitHub</a></li>
<li class="chapter" data-level="6.2.2" data-path="version-control-and-collaboration.html"><a href="version-control-and-collaboration.html#start-an-r-studio-project-under-version-control"><i class="fa fa-check"></i><b>6.2.2</b> Start an R-Studio project under version control</a></li>
<li class="chapter" data-level="6.2.3" data-path="version-control-and-collaboration.html"><a href="version-control-and-collaboration.html#gitkraken"><i class="fa fa-check"></i><b>6.2.3</b> GitKraken</a></li>
<li class="chapter" data-level="6.2.4" data-path="version-control-and-collaboration.html"><a href="version-control-and-collaboration.html#fork-and-pull"><i class="fa fa-check"></i><b>6.2.4</b> Fork and Pull</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="version-control-and-collaboration.html"><a href="version-control-and-collaboration.html#best-practices"><i class="fa fa-check"></i><b>6.3</b> Best Practices</a><ul>
<li class="chapter" data-level="6.3.1" data-path="version-control-and-collaboration.html"><a href="version-control-and-collaboration.html#citing-analyses"><i class="fa fa-check"></i><b>6.3.1</b> Citing analyses</a></li>
<li class="chapter" data-level="6.3.2" data-path="version-control-and-collaboration.html"><a href="version-control-and-collaboration.html#private-v.-public-repos"><i class="fa fa-check"></i><b>6.3.2</b> Private v. public repos</a></li>
<li class="chapter" data-level="6.3.3" data-path="version-control-and-collaboration.html"><a href="version-control-and-collaboration.html#granularity-of-repos"><i class="fa fa-check"></i><b>6.3.3</b> Granularity of repos</a></li>
<li class="chapter" data-level="6.3.4" data-path="version-control-and-collaboration.html"><a href="version-control-and-collaboration.html#code-licensing"><i class="fa fa-check"></i><b>6.3.4</b> Code Licensing</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="mapping-in-r.html"><a href="mapping-in-r.html"><i class="fa fa-check"></i><b>7</b> Mapping in R</a><ul>
<li class="chapter" data-level="7.1" data-path="mapping-in-r.html"><a href="mapping-in-r.html#leaflet"><i class="fa fa-check"></i><b>7.1</b> Leaflet</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="resources-and-references.html"><a href="resources-and-references.html"><i class="fa fa-check"></i><b>8</b> Resources and References</a></li>
<li class="chapter" data-level="9" data-path="glossary-of-terms.html"><a href="glossary-of-terms.html"><i class="fa fa-check"></i><b>9</b> Glossary of Terms</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Hakai Institute R Stats Guide</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="mapping-in-r" class="section level1">
<h1><span class="header-section-number">Chapter 7</span> Mapping in R</h1>
<div id="leaflet" class="section level2">
<h2><span class="header-section-number">7.1</span> Leaflet</h2>
<p>It is possible to use the Javascript based widget known as <a href="https://rstudio.github.io/leaflet/">Leaflet</a> from within R. This is great for making some simple maps in an interactive R Markdown document, as well as in Shiny apps. You can use basemaps that Hakai hosts from the ArcGIS Online Server (AGOL), or you can use the basic maps that are provided. You are able to add points, visualize heat maps, legends, cloropleths, and other simple GIS tasks.</p>
<p>To do this from R you need to:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># The package that allows you add leaflet map widgets to your interactive web documents:</span>
<span class="kw">install.packages</span>(<span class="st">&#39;leaflet&#39;</span>)

<span class="co"># The package that allows you to use map tiles from Hakai&#39;s AGOL</span>
<span class="kw">install.packages</span>(<span class="st">&#39;leaflet.esri&#39;</span>)</code></pre></div>
<p>Follow the instructions on R-Studio’s <a href="https://rstudio.github.io/leaflet/">Leaflet package webpage</a> to create your map. The included basemaps can be viewed <a href="https://leaflet-extras.github.io/leaflet-providers/preview/index.html">here</a></p>
<p>To use the basemaps on Hakai’s AGOL server use the <code>addEsriTiledMapLayer()</code> function from the <code>esri.leaflet</code> package where the documentation can be read <a href="https://bhaskarvk.github.io/leaflet.esri/reference/addEsriTiledMapLayer.html">here</a></p>
<p>Hakai ArcGIS Online maps can be viewed <a href="https://ags.hakai.org:6443/arcgis/rest/services/AGOL_basemaps/">here</a>. You can first view any of these basemaps in AGOL to decide which you’d like to use. Once you’ve decided, you simply copy the URL and paste it into the <code>addEsriTileMapLayer()</code> function</p>
<p>Example:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(leaflet)</code></pre></div>
<pre><code>## Warning: package &#39;leaflet&#39; was built under R version 3.4.4</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(leaflet.esri)</code></pre></div>
<pre><code>## Warning: package &#39;leaflet.esri&#39; was built under R version 3.4.4</code></pre>
<pre><code>## Loading required package: leaflet.extras</code></pre>
<pre><code>## Warning: package &#39;leaflet.extras&#39; was built under R version 3.4.4</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># library(magrittr)</span>
<span class="co">#  leaflet() %&gt;%</span>
<span class="co">#         # Set the default lat and long and zoom level </span>
<span class="co">#         setView(lng = -126, lat = 50.3601, zoom = 7) %&gt;% </span>
<span class="co">#         # Add default tile</span>
<span class="co">#         addTiles() %&gt;% </span>
<span class="co">#         # Add tile from Hakai AGOL </span>
<span class="co">#         addEsriTiledMapLayer(url = &quot;https://ags.hakai.org:6443/arcgis/rest/services/AGOL_basemaps/Marine_charts/MapServer&quot;)</span></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="version-control-and-collaboration.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="resources-and-references.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": ["Hakai Institute R Stats Guide.pdf", "Hakai Institute R Stats Guide.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
